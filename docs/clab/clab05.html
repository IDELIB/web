<HTML>
<HEAD>
<TITLE>CLab_05-Ｆ仕様書</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<CENTER>
<TABLE BORDER=0 WIDTH="600" BGCOLOR="#FEFBDA">
<TR><TD>

<TABLE BORDER=0" WIDTH="600">
<TR>
<TD BGCOLOR="#800040" WIDTH="10%" ALIGN="CENTER">
<FONT SIZE=2 COLOR="#FFFFFF"><B>第５章</B></FONT>
</TD>

<TD BGCOLOR="000000" WIDTH="75%">
<FONT SIZE=4 COLOR ="#FFFFFF"><B>　ストリームファイルってなに？</B></FONT>
<BR>
</TD>
<TD BGCOLOR="000000" WIDTH="15%">
<FONT SIZE=1 COLOR ="#FFFFFF"><B>
RPGプログラマーの為のＣ言語講座
</B></FONT>
</TD>
</TR>
</TABLE>
</TD></TR>

<TR><TD ALIGN="CENTER">
<TABLE BORDER=0 WIDTH="570">
<TR>
<TD><FONT SIZE=2>

<P>ＡＳ／４００は、<FONT COLOR="#FF00FF">ＯＳ標準でＲＤＢを実装しています。</FONT>
<BR>そして、ライブラリーに作成するファイルは、特に意識しなくても、<FONT COLOR="#FF00FF">ＲＤＢ形式</FONT>を取ります。
<BR>通常のファイルＩ／Ｏはレコード単位でのＩ／Ｏとなり、通常、レコードの中は固定フィールドと
なります。

<P><FONT COLOR="#FF00FF">他のプラットフォームは、ＯＳに、このような機能ははついていません。</FONT>
<BR>ＲＤＢを使用したい場合は<FONT COLOR="#FF00FF">ＤＢＭＳ</FONT>を導入し、その中でこのような処理をします。

<P>ＰＣやＵＮＩＸの標準のファイルシステムでは、ディレクトリーにファイル名などの属性は登録しますが、
レコードレイアウトのなどは属性としてもちません。
<BR>データはファイルに連続して入ります。
<BR>データの区切りなどにＣＲやＬＦなどの制御文字を挿入することで、ファイルの表示をコントロールしています。

<P><FONT COLOR="#008000">このようなファイル形式をストリームファイルと呼びます。</FONT>
<P>ストリームファイルには、事前に定義したフィールドというものはありません。
<BR>データは連続して置かれ、改行などの制御コードを含みます。

<P>Ｃ言語は、ストリーム形式しかサポートされていない環境で主に使用されてきたため、
<BR><FONT COLOR="#FF00FF">標準のＩ／Ｏ関数はストリーム形式をサポートするようになっています。</FONT>

<P><H3><FONT COLOR="#008000">と言う訳で、ＡＳ／４００のＣ言語環境でファイルＩ／Ｏを行うには、大きく３種類の方法が存在します。</H3></FONT>

<UL>

<LI><FONT COLOR="#008000">RPGなどと同じく、AS/400のファイル(PF,LF,DSPF,PRTF,ICFFなど)にレコード単位でＩ／Ｏする</FONT>
	<UL>ＩＬＥ−Ｃには、そのための関数群が提供されています。これらAS/400独自の関数を使うことにより
	RPGなどとある程度同じイメージで、レコード単位のファイルＩ／Ｏが可能です。
	</UL>

<LI><FONT COLOR="#008000">Cから、ファイル（ストリームファイル）にＩ／Ｏする標準関数を使い、AS/400のＰＦ，ＬＦに出力する</FONT>
	<UL>Cからは連続したバッファー出力を行うと、ＯＳ／４００が物理ファイルのレコード形式にマップする。
	Ｃからは連続したストリームファイルに見えるが、実際のデータは、ファイルの長さに分割されて出力される。
	</UL>

<LI><FONT COLOR="#008000">Ｃから、ファイル（ストリームファイル）にＩ／Ｏする標準関数を使い、ＩＦＳ（統合ファイルシステム）に出力する。</FONT>
	<UL>ＩＦＳ（統合ファイルシステム）は、ライブラリー形式以外に、標準のストリームファイル形式をサポートしています。
	<BR>そのため、ほぼ、他のプラットフォーム（ＵＮＩＸ，ＷＩＮＤＷＯＳ系）とコンパチの使い方が可能になります。
	</UL>
</UL>

</FONT>
</TD></TR>
</TABLE>

<P><HR>

</TD></TR>
</TABLE>

</body>
</html>